<!DOCTYPE html>
<html>
<head>
  <title>Add Money to Wallet</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
  <h3>Adding â‚¹{{ amount }} to Wallet</h3>
  <button id="rzp-button">Pay with Razorpay</button>

  <script>
    var options = {
        "key": "{{ key_id }}",
        "amount": "{{ order.amount }}",
        "currency": "INR",
        "name": "Driver Wallet Top-Up",
        "description": "Adding money to wallet",
        "order_id": "{{ order.id }}",
        "handler": function (response){
            // Auto-submit form to backend
            var form = document.createElement('form');
            form.method = 'POST';
            form.action = "{{ url_for('driver.wallet_payment_success') }}";

            for (var key in response) {
              var input = document.createElement('input');
              input.type = 'hidden';
              input.name = key;
              input.value = response[key];
              form.appendChild(input);
            }

            document.body.appendChild(form);
            form.submit();
        },
        "theme": {
            "color": "#0ea5a2"
        }
    };
    var rzp1 = new Razorpay(options);
    document.getElementById('rzp-button').onclick = function(e){
        rzp1.open();
        e.preventDefault();
    }
  </script>
</body>
</html>
