<!DOCTYPE html>
<html>
<head>
  <title>Manage Ride</title>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_API_KEY"></script>
</head>
<body>
  <h2>Ride Management</h2>
  <p>Status: <span id="ride_status">{{ ride.status }}</span></p>

  <div id="map" style="width:100%; height:400px;"></div>

  <form method="POST" action="{{ url_for('driver.start_ride', ride_id=ride.id) }}">
    <button type="submit">Start Ride</button>
  </form>

  <form method="POST" action="{{ url_for('driver.complete_ride_route', ride_id=ride.id) }}">
    <button type="submit">Complete Ride</button>
  </form>

<script>
const pickup = { lat: {{ ride.pickup_lat }}, lng: {{ ride.pickup_lng }} };
const drop = { lat: {{ ride.drop_lat }}, lng: {{ ride.drop_lng }} };

let map;
function initMap() {
  map = new google.maps.Map(document.getElementById('map'), {
    center: pickup, zoom: 13
  });
  new google.maps.Marker({ position: pickup, map, label:"P" });
  new google.maps.Marker({ position: drop, map, label:"D" });
}
initMap();
</script>
</body>
</html>
